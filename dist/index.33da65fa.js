let e=0,t=0;window.addEventListener("load",(()=>{r()}));const o=document.querySelector("form");o.addEventListener("submit",(c=>{c.preventDefault();((o,c)=>{const r=`http://www.omdbapi.com/?apikey=3defedc0&t=${encodeURIComponent(o)}`;fetch(r).then((e=>{if(e.ok)return e.json();throw new Error("Request failed with status code: "+e.status)})).then((r=>{if("N/A"===r.Poster){const e=document.querySelector(".input-container"),t=document.createElement("p");return t.innerHTML=`${o} is not in the database`,e.appendChild(t),void setTimeout((()=>{t.remove()}),4e3)}{r.Rating=c;let o=JSON.parse(localStorage.getItem("movies"));null==o?o=[r]:o.some((e=>e.Title===r.Title))?console.log("Movie already in watched list"):(o.push(r),e++,t+=parseInt(r.Runtime),n(e,t)),localStorage.setItem("movies",JSON.stringify(o)),a(),i()}})).catch((e=>{console.error("Error:",e)}))})(document.querySelector('input[name="title"]').value,document.querySelector("#rating").value),o.reset();document.querySelector('input[name="title"]').focus()}));const c=e=>{const t=document.querySelector(".watched-movies"),o=document.querySelectorAll(".watched-movies div");if(!Array.from(o).some((t=>t.getAttribute("id")===e.imdbID))){const o=document.createElement("div");o.classList.add("movie"),o.setAttribute("id",e.imdbID),o.setAttribute("data-movie-target","#show-page"),o.classList.add("active");const c=document.createElement("img");c.classList.add("movie-poster"),c.src=e.Poster,c.alt=`${e.Title} poster`;const r=document.createElement("h4");r.innerHTML=e.Title,o.appendChild(c),o.appendChild(r),t.appendChild(o)}},r=()=>{const o=JSON.parse(localStorage.getItem("movies"));document.querySelector(".watched-movies");e=0,t=0,null!==o&&o.forEach((o=>{c(o),e++,t+=parseInt(o.Runtime)})),n(e,t),i(),s()},n=(e,t)=>{document.querySelector(".num-movies p").innerHTML=e;document.querySelector(".watch-time p").innerHTML=t},a=()=>{const e=JSON.parse(localStorage.getItem("movies")).slice(-1)[0];c(e)},i=()=>{const e=document.querySelectorAll(".watched-movies div"),t=document.querySelectorAll("[data-page-content]"),o=JSON.parse(localStorage.getItem("movies"));let c="";e.forEach((e=>{e.addEventListener("click",(()=>{const r=e.getAttribute("id");o.forEach((e=>{e.imdbID===r&&(c=e)}));const n=document.querySelector(e.dataset.movieTarget);t.forEach((e=>{e.classList.remove("active")})),n.classList.add("active");const a=document.querySelector("#show-page .img-title"),i=document.createElement("img");a.innerHTML="",i.src=c.Poster,i.alt=`${c.Title} Poster`;const s=document.createElement("figcaption");s.innerHTML=c.Title,a.appendChild(i),a.appendChild(s);const l=document.querySelector("#show-page .rating p"),d=document.querySelector("#show-page .genre p"),m=document.querySelector("#show-page .release-date p"),u=document.querySelector("#show-page .director p"),p=document.querySelector("#show-page .rated p"),v=document.querySelector("#show-page .duration p"),S=document.querySelector("#show-page .plot p");l.innerHTML=c.Rating,d.innerHTML=c.Genre,m.innerHTML=c.Released,u.innerHTML=c.Director,p.innerHTML=c.Rated,v.innerHTML=c.Runtime,S.innerHTML=c.Plot}))})),s()},s=()=>{const e=document.querySelectorAll(".watched-movies div"),t=JSON.parse(localStorage.getItem("movies"));e.forEach((e=>{e.addEventListener("click",(()=>{t.forEach((t=>{if(t.imdbID===e.getAttribute("id")){const e=document.querySelectorAll("[data-page-content]");document.querySelector("#show-page .button-container").classList.remove("active");document.querySelector("#show-page .back-btn").addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("active")}));document.querySelector("#main-page").classList.add("active")}));document.querySelector("#show-page .delete-btn").addEventListener("click",(()=>{d(t)}))}}))}))}))};let l;const d=e=>{document.querySelector("#delete-modal").classList.add("active");const t=document.querySelector("#show-page .button-container");t.classList.add("active");document.querySelector("#delete-modal .cancel-btn").addEventListener("click",(()=>{t.classList.remove("active");document.querySelector("#delete-modal").classList.remove("active")}));const o=document.querySelector("#delete-modal .confirm-btn");"function"==typeof l&&o.removeEventListener("click",l),l=()=>m(e),o.addEventListener("click",l)},m=o=>{document.querySelectorAll("[data-page-content]").forEach((e=>{e.classList.remove("active")}));const c=JSON.parse(localStorage.getItem("movies")),r=c.findIndex((e=>e.imdbID===o.imdbID));-1!==r&&(c.splice(r,1),localStorage.setItem("movies",JSON.stringify(c)));document.querySelectorAll(".watched-movies div").forEach((c=>{c.getAttribute("id")===o.imdbID&&(c.remove(),e--,t-=parseInt(o.Runtime),n(e,t))}));document.querySelector("#delete-modal").classList.remove("active");document.querySelector("#main-page").classList.add("active")};
//# sourceMappingURL=index.33da65fa.js.map
