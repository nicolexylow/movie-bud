let e=0,t=0,n=!1;window.addEventListener("load",(()=>{i()}));const r=document.querySelector("form");r.addEventListener("submit",(c=>{c.preventDefault();const i=document.querySelector('input[name="title"]').value,u=document.querySelector("#rating").value;if(n)return(()=>{const n=document.querySelector('input[name="title"]').value,r=document.querySelector("#rating").value,a=document.querySelector('input[name="image"]').value,c=document.querySelector('input[name="release-date"]').value,i=document.querySelector('input[name="duration"]').value,u=document.querySelector('input[name="rated"]').value,m=document.querySelector('input[name="genre"]').value,p=document.querySelector('input[name="director"]').value,v=document.querySelector('textarea[name="plot"]').value;let S=JSON.parse(localStorage.getItem("manualId"));null===S?S=1:(S=parseInt(S),S++);const g=c.split("-"),y=g[2]+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][Number(g[1])-1]+" "+g[0];let h=JSON.parse(localStorage.getItem("movies"));const b={Title:n,Rating:r,Poster:a,Released:y,Runtime:`${i} min`,Rated:u,Genre:m,Director:p,Plot:v,imdbID:S.toString()};null===h?h=[b]:h.some((e=>e.Title===n))?console.log("Movie already in watched list"):(h.push(b),e++,t+=parseInt(i),l(e,t)),localStorage.setItem("movies",JSON.stringify(h)),localStorage.setItem("manualId",JSON.stringify(S)),o(),document.querySelector("form").reset(),document.querySelector('input[name="title"]').focus(),d(),s()})(),void(n=!1);((r,o)=>{const c=`http://www.omdbapi.com/?apikey=3defedc0&t=${encodeURIComponent(r)}`;fetch(c).then((e=>{if(e.ok)return e.json();throw new Error("Request failed with status code: "+e.status)})).then((r=>{if("N/A"===r.Poster||"False"===r.Response)return a(),void(n=!0);{r.Rating=o;let n=JSON.parse(localStorage.getItem("movies"));null==n?n=[r]:n.some((e=>e.Title===r.Title))?console.log("Movie already in watched list"):(n.push(r),e++,t+=parseInt(r.Runtime),l(e,t)),localStorage.setItem("movies",JSON.stringify(n)),d(),s()}})).catch((e=>{console.error("Error:",e)}))})(i,u),r.reset();document.querySelector('input[name="title"]').focus()}));const o=()=>{const e=document.querySelector(".input-container");if(e.children.length>2)for(let t=0;t<7;t++)e.lastChild.remove();document.querySelector(".input-container p").remove()},a=()=>{const e=document.querySelector(".input-container");if(document.querySelector('input[name="image"]'))return;const t=document.createElement("label");t.classList.add("input-image"),t.innerHTML="Image";const n=document.createElement("input");n.setAttribute("type","url"),n.setAttribute("name","image"),n.setAttribute("placeholder","https://www.example.com/image.jpg"),n.setAttribute("required",""),t.appendChild(n),e.append(t);const r=document.createElement("label");r.classList.add("input-release-date"),r.innerHTML="Release Date";const o=document.createElement("input");o.setAttribute("type","date"),o.setAttribute("name","release-date"),o.setAttribute("required",""),r.appendChild(o),e.append(r);const a=document.createElement("label");a.classList.add("input-duration"),a.innerHTML="Duration (min)";const c=document.createElement("input");c.setAttribute("type","number"),c.setAttribute("name","duration"),c.setAttribute("placeholder","126"),c.setAttribute("required",""),a.appendChild(c),e.append(a);const i=document.createElement("label");i.classList.add("input-rated"),i.innerHTML="Rated";const l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("name","rated"),l.setAttribute("placeholder","PG-13"),l.setAttribute("required",""),i.appendChild(l),e.append(i);const d=document.createElement("label");d.classList.add("input-genre"),d.innerHTML="Genre";const s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("name","genre"),s.setAttribute("placeholder","Action, Adventure"),s.setAttribute("required",""),d.appendChild(s),e.append(d);const u=document.createElement("label");u.classList.add("input-director"),u.innerHTML="Director";const m=document.createElement("input");m.setAttribute("type","text"),m.setAttribute("name","director"),m.setAttribute("placeholder","Tim Burton"),m.setAttribute("required",""),u.appendChild(m),e.append(u);const p=document.createElement("label");p.classList.add("input-plot"),p.innerHTML="Plot";const v=document.createElement("textarea");v.setAttribute("name","plot"),v.setAttribute("placeholder","Short description of the movie"),v.setAttribute("required",""),p.appendChild(v),e.append(p);const S=document.createElement("p");S.innerHTML="Movie not found. Please manually input.",e.prepend(S)},c=e=>{const t=document.querySelector(".watched-movies"),r=document.querySelectorAll(".watched-movies div");let o=Array.from(r).some((t=>t.getAttribute("id")===e.imdbID)),a=JSON.parse(localStorage.getItem("manualId"));if(!o){const r=document.createElement("div");r.classList.add("movie"),n?r.setAttribute("id",a):r.setAttribute("id",e.imdbID),r.setAttribute("data-movie-target","#show-page"),r.classList.add("active");const o=document.createElement("img");o.classList.add("movie-poster"),o.src=e.Poster,o.alt=`${e.Title} poster`;const c=document.createElement("h4");c.innerHTML=e.Title,r.appendChild(o),r.appendChild(c),t.appendChild(r)}},i=()=>{const n=JSON.parse(localStorage.getItem("movies"));document.querySelector(".watched-movies");e=0,t=0,null!==n&&n.forEach((n=>{c(n),e++,t+=parseInt(n.Runtime)})),l(e,t),s(),u()},l=(e,t)=>{document.querySelector(".num-movies p").innerHTML=e;document.querySelector(".watch-time p").innerHTML=t},d=()=>{const e=JSON.parse(localStorage.getItem("movies")).slice(-1)[0];c(e)},s=()=>{const e=document.querySelectorAll(".watched-movies div"),t=document.querySelectorAll("[data-page-content]"),r=JSON.parse(localStorage.getItem("movies"));let o="";e.forEach((e=>{e.addEventListener("click",(()=>{const a=e.getAttribute("id");r.forEach((e=>{e.imdbID===a&&(o=e)}));const c=document.querySelector(e.dataset.movieTarget);t.forEach((e=>{e.classList.remove("active")})),c.classList.add("active");const i=document.querySelector("#show-page .img-title"),l=document.createElement("img");if(i.innerHTML="",n);else{l.src=o.Poster,l.alt=`${o.Title} Poster`;const e=document.createElement("h2");e.innerHTML=o.Title,i.appendChild(e),i.appendChild(l);const t=document.querySelector("#show-page .rating p"),n=document.querySelector("#show-page .genre p"),r=document.querySelector("#show-page .release-date p"),a=document.querySelector("#show-page .director p"),c=document.querySelector("#show-page .rated p"),d=document.querySelector("#show-page .duration p"),s=document.querySelector("#show-page .plot p");t.innerHTML=o.Rating,n.innerHTML=o.Genre,r.innerHTML=o.Released,a.innerHTML=o.Director,c.innerHTML=o.Rated,d.innerHTML=o.Runtime,s.innerHTML=o.Plot}}))})),u()},u=()=>{const e=document.querySelectorAll(".watched-movies div"),t=JSON.parse(localStorage.getItem("movies"));e.forEach((e=>{e.addEventListener("click",(()=>{t.forEach((t=>{if(t.imdbID===e.getAttribute("id")){const e=document.querySelectorAll("[data-page-content]");document.querySelector("#show-page .button-container").classList.remove("active");document.querySelector("#show-page .back-btn").addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("active")}));document.querySelector("#main-page").classList.add("active")}));document.querySelector("#show-page .delete-btn").addEventListener("click",(()=>{p(t)}))}}))}))}))};let m;const p=e=>{document.querySelector("#delete-modal").classList.add("active");const t=document.querySelector("#show-page .button-container");t.classList.add("active");document.querySelector("#delete-modal .cancel-btn").addEventListener("click",(()=>{t.classList.remove("active");document.querySelector("#delete-modal").classList.remove("active")}));const n=document.querySelector("#delete-modal .confirm-btn");"function"==typeof m&&n.removeEventListener("click",m),m=()=>v(e),n.addEventListener("click",m)},v=n=>{document.querySelectorAll("[data-page-content]").forEach((e=>{e.classList.remove("active")}));const r=JSON.parse(localStorage.getItem("movies")),o=r.findIndex((e=>e.imdbID===n.imdbID));-1!==o&&(r.splice(o,1),localStorage.setItem("movies",JSON.stringify(r)));document.querySelectorAll(".watched-movies div").forEach((r=>{r.getAttribute("id")===n.imdbID&&(r.remove(),e--,t-=parseInt(n.Runtime),l(e,t))}));document.querySelector("#delete-modal").classList.remove("active");document.querySelector("#main-page").classList.add("active")};
//# sourceMappingURL=index.f1ed27fd.js.map
